---
import Layout from '~/layouts/PageLayout.astro';
import PhotoSwiper from '~/components/ui/PhotoSwiper.tsx';
import TestimonialCard from '~/components/ui/TestimonialCard.astro';
import CategoryHero from '~/components/widgets/CategoryHero.astro';
import NotionContact from '~/components/widgets/NotionContact.astro';
import Hero from '~/components/widgets/Hero.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import { getCategoryImages, getCloudinaryImageUrl } from '~/utils/cloudinary';
import RelatedPages from '~/components/ui/RelatedPages.astro';
import ContextualLinks from '~/components/ui/ContextualLinks.astro';
import { getRelatedPages } from '~/utils/internal-linking';

const metadata = {
  title: "Photography Portfolio - Capturing Life's Beautiful Moments",
  description:
    'Professional photographer specializing in landscapes, portraits, boudoir, and family photography. Creating timeless memories through artistic vision and technical excellence.',
  keywords:
    'photography, portraits, landscapes, boudoir, maternity, children, professional photographer, San Francisco',
};

// Get optimized images from Cloudinary for each category
const landscapeImages = await getCategoryImages('landscape', 8);
const portraitImages = await getCategoryImages('portrait', 7);
const boudoirImages = await getCategoryImages('boudoir', 6);
const maternityChildrenImages = await getCategoryImages('maternity', 7);

// Get related service pages
const relatedServices = getRelatedPages('/services/color', 3, true);

// Contextual links for photography services
const contextualLinks = [
  {
    text: 'Film & Video Production',
    href: '/services/motion',
    icon: 'tabler:movie',
    description: 'Professional video post-production and editing',
  },
  {
    text: 'Audio for Video',
    href: '/services/rhythm',
    icon: 'tabler:music',
    description: 'Sound design and audio mixing for visual content',
  },
];

// Generate optimized hero image URL
const heroImageUrl = getCloudinaryImageUrl('portfolio/landscape/mountain-sunset-vista', {
  preset: 'hero',
  format: 'webp',
  quality: 85,
});

// Generate optimized about section image URL
const aboutImageUrl = getCloudinaryImageUrl('portfolio/portrait/business-headshot', {
  width: 600,
  height: 750,
  crop: 'fill',
  gravity: 'face',
  format: 'webp',
  quality: 85,
});
---

<Layout metadata={metadata}>
  <!-- Hero Section -->
  <Hero
    title={`Capturing Life's <span class="text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-primary)]">Beautiful Moments</span>`}
    subtitle="Professional photographer specializing in creating timeless memories through artistic vision, technical excellence, and a passion for storytelling."
    image={heroImageUrl}
    actions={[
      {
        variant: 'primary',
        text: 'See Our Work',
        href: '#portfolio',
        class:
          'bg-white text-[var(--color-primary)] font-semibold px-8 py-4 rounded-full hover:bg-gray-100 transition-colors duration-200 transform hover:scale-105',
      },
      {
        variant: 'secondary',
        text: 'Start Your Session',
        href: '#contact',
        class:
          'border-2 border-white text-white font-semibold px-8 py-4 rounded-full hover:bg-white hover:text-[var(--color-primary)] transition-all duration-200 transform hover:scale-105',
      },
    ]}
    gradientBg={true}
    showScrollIndicator={true}
  />

  <!-- Portfolio Section -->
  <section id="portfolio" class="py-20 bg-[var(--color-background)] dark:bg-[var(--color-background)]">
    <div class="px-4 mx-auto max-w-7xl">
      <div class="mb-16 text-center">
        <h2 class="text-4xl md:text-5xl font-bold text-[var(--color-foreground)] mb-6">Photography Portfolio</h2>
        <p class="text-xl text-[var(--color-muted-foreground)] max-w-3xl mx-auto mb-8">
          Explore our diverse collection of photography services, each crafted with artistic vision and professional
          expertise. All images are delivered through our optimized Cloudinary CDN for the best viewing experience.
        </p>
        
        <!-- Navigation Buttons -->
        <div class="flex flex-wrap gap-3 justify-center sm:gap-4">
          <a
            href="#landscape"
            class="inline-flex items-center bg-[var(--color-primary)] hover:bg-[var(--color-secondary)] text-[var(--color-primary-foreground)] font-medium px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"
          >
            Landscape
          </a>
          <a
            href="#portrait"
            class="inline-flex items-center bg-[var(--color-primary)] hover:bg-[var(--color-secondary)] text-[var(--color-primary-foreground)] font-medium px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"
          >
            Portrait
          </a>
          <a
            href="#boudoir"
            class="inline-flex items-center bg-[var(--color-primary)] hover:bg-[var(--color-secondary)] text-[var(--color-primary-foreground)] font-medium px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"
          >
            Boudoir
          </a>
          <a
            href="#family"
            class="inline-flex items-center bg-[var(--color-primary)] hover:bg-[var(--color-secondary)] text-[var(--color-primary-foreground)] font-medium px-4 py-2 rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"
          >
            Family
          </a>
        </div>
      </div>

      <!-- Landscape Photography -->
      <div id="landscape" class="mb-20">
        <CategoryHero
          title="Landscape Photography"
          subtitle="Nature's Canvas"
          description="Capturing the raw beauty and grandeur of nature's most spectacular moments. From mountain vistas to ocean shores, each landscape tells a story of natural wonder."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={landscapeImages.map((i) => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      <!-- Portrait Photography -->
      <div id="portrait" class="mb-20">
        <CategoryHero
          title="Portrait Photography"
          subtitle="Human Connection"
          description="Professional portraits that capture personality, emotion, and the unique essence of each individual. From corporate headshots to artistic expressions."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={portraitImages.map((i) => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      <!-- Boudoir Photography -->
      <div id="boudoir" class="mb-20">
        <CategoryHero
          title="Boudoir Photography"
          subtitle="Intimate Artistry"
          description="Elegant and tasteful intimate photography that celebrates confidence, beauty, and self-expression in a comfortable, professional environment."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={boudoirImages.map((i) => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      <!-- Maternity & Children Photography -->
      <div id="family" class="mb-20">
        <CategoryHero
          title="Maternity & Children"
          subtitle="Life's Precious Moments"
          description="Capturing the wonder of new life, from pregnancy glow to first smiles. Creating timeless memories of your family's most precious moments."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={maternityChildrenImages.map((i) => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="py-20 bg-[var(--color-background)] dark:bg-[var(--color-background)]">
    <div class="px-4 mx-auto max-w-7xl">
      <div class="grid grid-cols-1 gap-12 items-center lg:grid-cols-2">
        <div>
          <h2 class="text-4xl md:text-5xl font-bold text-[var(--color-foreground)] mb-6">About the Artist</h2>
          <div class="space-y-6 text-lg text-[var(--color-foreground)]">
            <p>
              With over a decade of experience in professional photography, I specialize in creating visual stories that
              capture the essence of life's most meaningful moments. My approach combines technical expertise with
              artistic vision to deliver images that not only look beautiful but feel authentic.
            </p>
            <p>
              Whether it's the raw power of a landscape, the intimate connection in a portrait, or the joy of a family
              milestone, I believe every photograph should tell a story. My goal is to create images that you'll
              treasure for generations to come.
            </p>
            <p>
              Based in the San Francisco Bay Area, I work with clients locally and travel for destination sessions.
              Every project is approached with passion, creativity, and a commitment to excellence. All images are
              delivered through our optimized Cloudinary CDN for fast loading and superior quality.
            </p>
          </div>

          <div class="mt-8">
            <h3 class="text-xl font-semibold text-[var(--color-foreground)] mb-4">Achievements & Recognition</h3>
            <ul class="space-y-2 text-[var(--color-muted-foreground)]">
              <li>• Featured in Photography Magazine (2023)</li>
              <li>• Winner - Bay Area Photography Awards (2022)</li>
              <li>• 500+ satisfied clients and counting</li>
              <li>• Professional Photography Association Member</li>
            </ul>
          </div>
        </div>

        <div class="relative">
          <div class="aspect-[4/5] overflow-hidden rounded-lg shadow-2xl">
            <img
              src={aboutImageUrl}
              alt="Professional photographer at work"
              class="object-cover w-full h-full"
              loading="lazy"
              width="600"
              height="750"
            />
          </div>
          <div
            class="absolute -bottom-6 -right-6 bg-[var(--color-card)] p-6 rounded-lg shadow-lg border border-[var(--color-border)]"
          >
            <p class="text-2xl font-bold text-[var(--color-primary)]">10+</p>
            <p class="text-[var(--color-muted-foreground)]">Years Experience</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <CallToAction
    title="Ready to Create Something Beautiful?"
    subtitle="Let's work together to capture your vision and create memories that will last a lifetime."
    actions={[
      {
        text: 'Get Started Today',
        href: '#contact',
        variant: 'primary',
      },
      {
        text: 'Call Now',
        href: 'tel:+15551234567',
        variant: 'secondary',
      },
    ]}
  />

  <!-- Contact Section -->
  <section id="contact" class="py-20 bg-[var(--color-card)] dark:bg-[var(--color-card)]">
    <NotionContact service="color" />
  </section>

  <!-- Related Services -->
  <section class="py-12 bg-muted/30">
    <div class="px-4 mx-auto max-w-7xl sm:px-6">
      <RelatedPages pages={relatedServices} title="Complete Your Visual Story" variant="cards" />
    </div>
  </section>
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }

  /* Custom scrollbar using design system colors */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-background);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-accent);
    border-radius: var(--radius);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary);
  }

  /* Enhanced focus styles for accessibility */
  a:focus-visible,
  button:focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }

  /* Smooth transitions for interactive elements */
  a,
  button {
    transition: all 0.2s ease-in-out;
  }

  /* Ensure proper contrast for text over gradients */
  .gradient-text {
    background: linear-gradient(135deg, var(--color-accent), var(--color-primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
