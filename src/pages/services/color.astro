---
import Layout from '~/layouts/PageLayout.astro';
import PhotoSwiper from '~/components/ui/PhotoSwiper.tsx';
import CategoryHero from '~/components/widgets/CategoryHero.astro';
import NotionContact from '~/components/widgets/NotionContact.astro';
import Hero from '~/components/widgets/Hero.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import { getCategoryImages, getCloudinaryImageUrl } from '~/utils/cloudinary';
import RelatedPages from '~/components/ui/RelatedPages.astro';
import { getRelatedPages } from '~/utils/internal-linking';
import colorHeroImage from '~/assets/images/color-hero.png';

const metadata = {
  title: "Photography Portfolio - Capturing Life's Beautiful Moments",
  description:
    'Professional photographer specializing in landscapes, portraits, boudoir, and family photography. Creating timeless memories through artistic vision and technical excellence.',
  keywords:
    'photography, portraits, landscapes, boudoir, maternity, children, professional photographer, San Francisco',
};

// Get optimized images from Cloudinary for each category in parallel
const [landscapeImages, portraitImages, boudoirImages, maternityImages, childrenImages] = await Promise.all([
  getCategoryImages('landscape', 8),
  getCategoryImages('portrait', 7),
  getCategoryImages('boudoir', 6),
  getCategoryImages('maternity', 7),
  getCategoryImages('children', 6),
]);

// Get related service pages
const relatedServices = getRelatedPages('/services/color', 3, true);
---

<Layout metadata={metadata}>
  {/* Hero Section*/}
  <Hero
    title={`Capturing Life's <span class="text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-primary)]">Beautiful Moments</span>`}
    subtitle="Professional photographer specializing in creating timeless memories through artistic vision, technical excellence, and a passion for storytelling."
    image={colorHeroImage.src}
    centerImage={true}
    actions={[
      {
        variant: 'primary',
        text: 'See Our Work',
        href: '#portfolio',
        class:
          'bg-white text-[var(--color-primary)] font-semibold px-8 py-4 rounded-full hover:bg-gray-100 transition-colors duration-200 transform hover:scale-105',
      },
      {
        variant: 'secondary',
        text: 'Start Your Session',
        href: '#contact',
        class:
          'border-2 border-white text-white font-semibold px-8 py-4 rounded-full hover:bg-white hover:text-[var(--color-primary)] transition-all duration-200 transform hover:scale-105',
      },
    ]}
    gradientBg={true}
    showScrollIndicator={true}
  />

  {/* Portfolio Section*/}
  <section id="portfolio" class="bg-[var(--color-background)] py-20 dark:bg-[var(--color-background)]">
    <div class="mx-auto max-w-7xl px-4">
      <div class="mb-16 text-center">
        <h2 class="mb-6 text-4xl font-bold text-[var(--color-foreground)] md:text-5xl">Photography Portfolio</h2>
        <p class="mx-auto mb-8 max-w-3xl text-xl text-[var(--color-muted-foreground)]">
          Explore our diverse collection of photography services, each crafted with artistic vision and professional
          expertise. All images are delivered through our optimized Cloudinary CDN for the best viewing experience.
        </p>

        {/* Navigation Buttons*/}
        <div class="flex flex-wrap justify-center gap-3 sm:gap-4">
          <a
            href="#landscape"
            class="inline-flex items-center rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] shadow-sm transition-colors duration-200 hover:bg-[var(--color-secondary)] hover:shadow-md sm:text-base"
          >
            Landscape
          </a>
          <a
            href="#portrait"
            class="inline-flex items-center rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] shadow-sm transition-colors duration-200 hover:bg-[var(--color-secondary)] hover:shadow-md sm:text-base"
          >
            Portrait
          </a>
          <a
            href="#boudoir"
            class="inline-flex items-center rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] shadow-sm transition-colors duration-200 hover:bg-[var(--color-secondary)] hover:shadow-md sm:text-base"
          >
            Boudoir
          </a>
          <a
            href="#maternity"
            class="inline-flex items-center rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] shadow-sm transition-colors duration-200 hover:bg-[var(--color-secondary)] hover:shadow-md sm:text-base"
          >
            Maternity
          </a>
          <a
            href="#children"
            class="inline-flex items-center rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-[var(--color-primary-foreground)] shadow-sm transition-colors duration-200 hover:bg-[var(--color-secondary)] hover:shadow-md sm:text-base"
          >
            Children
          </a>
        </div>
      </div>

      {/* Landscape Photography*/}
      <div id="landscape" class="mb-20">
        <CategoryHero
          title="Landscape Photography"
          subtitle="Nature's Canvas"
          description="Capturing the raw beauty and grandeur of nature's most spectacular moments. From mountain vistas to ocean shores, each landscape tells a story of natural wonder."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={landscapeImages.map(i => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      {/* Portrait Photography*/}
      <div id="portrait" class="mb-20">
        <CategoryHero
          title="Portrait Photography"
          subtitle="Human Connection"
          description="Professional portraits that capture personality, emotion, and the unique essence of each individual. From corporate headshots to artistic expressions."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={portraitImages.map(i => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      {/* Boudoir Photography*/}
      <div id="boudoir" class="mb-20">
        <CategoryHero
          title="Boudoir Photography"
          subtitle="Intimate Artistry"
          description="Elegant and tasteful intimate photography that celebrates confidence, beauty, and self-expression in a comfortable, professional environment."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={boudoirImages.map(i => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      {/* Maternity Photography*/}
      <div id="maternity" class="mb-20">
        <CategoryHero
          title="Maternity Photography"
          subtitle="Celebrating New Life"
          description="Capturing the beauty, grace, and anticipation of pregnancy. Creating timeless images that celebrate this miraculous journey and the connection between mother and baby."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={maternityImages.map(i => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>

      {/* Children Photography*/}
      <div id="children" class="mb-20">
        <CategoryHero
          title="Children Photography"
          subtitle="Pure Joy & Wonder"
          description="Capturing the innocence, curiosity, and boundless energy of childhood. From first steps to school portraits, preserving precious memories as your little ones grow."
        />
        <div>
          <PhotoSwiper
            client:visible
            images={childrenImages.map(i => ({
              src: i.src,
              fullSrc: getCloudinaryImageUrl(i.publicId, {
                quality: 'auto',
                format: 'auto',
              }),
              alt: i.alt,
            }))}
            className="mb-8"
          />
        </div>
      </div>
    </div>
  </section>

  {/* Call to Action*/}
  <CallToAction
    title="Ready to Create Something Beautiful?"
    subtitle="Let's work together to capture your vision and create memories that will last a lifetime."
    actions={[
      {
        text: 'Get Started Today',
        href: '#contact',
        variant: 'primary',
        icon: 'tabler:input-spark',
      },
    ]}
  />

  {/* Contact Section*/}
  <section id="contact" class="bg-[var(--color-card)] py-20 dark:bg-[var(--color-card)]">
    <NotionContact defaultService="Color" />
  </section>

  {/* Related Services*/}
  <section class="bg-muted/30 py-12">
    <div class="mx-auto max-w-7xl px-4 sm:px-6">
      <RelatedPages pages={relatedServices} title="Complete Your Visual Story" variant="cards" />
    </div>
  </section>
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }

  /* Custom scrollbar using design system colors */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-background);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-accent);
    border-radius: var(--radius);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary);
  }

  /* Enhanced focus styles for accessibility */
  a:focus-visible,
  button:focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }

  /* Smooth transitions for interactive elements */
  a,
  button {
    transition: all 0.2s ease-in-out;
  }

  /* Ensure proper contrast for text over gradients */
  .gradient-text {
    background: linear-gradient(135deg, var(--color-accent), var(--color-primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
